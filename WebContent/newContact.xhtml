<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<h:head>
	
</h:head>

<h:body>
		
	<h3>Olá, <h:outputText value="#{ContactBean.currentUser.name}"/></h3>
	
	<h3>Adicionar novo contato</h3>
	
	<style type="text/css">
	    .label {
	        width:20%;
	        padding:4px;
	    }
	 
	    .value {
	        width:80%;
	        padding:4px;
	    }
	 
	    .grid {
	        width:100%;
	    }
	 
	    .error {
	        color: red;
	    }
	 
	    .outputLabel {
	        font-weight: bold;
	    }
	 
	    .grid {
	        width:33%;
	        padding:4px;
	    }
	    
	    .semBorda tr, .semBorda td {
			border: none !important;
			vertical-align: top;
		}
	    
	</style>
	
  
<h:form id="form1">

    <p:growl id="growl" showDetail="true" showSummary="false" sticky="false" /> 
    
            <p:panel header="Dados Pessoais" id="dados">
               <!--  <p:messages /> -->
                <h:panelGrid columns="2" columnClasses="label, value">
                    <h:outputText value="Nome *"/><p:inputText value="#{ContactBean.newContact.name}" required="true" label="Name" onblur="value=value.toUpperCase()"/>
                    <h:outputText value="Sobrenome: *"/><p:inputText value="#{ContactBean.newContact.lastname}" required="true" label="Sobrenome" onblur="value=value.toUpperCase()"/>
                    <h:outputText value="Email: "/><p:inputText value="#{ContactBean.newContact.email}" onblur="value=value.toLowerCase()"/>
                </h:panelGrid>
            </p:panel>
 </h:form>
 
 <h:form id="form2">           
            <p:panel header="Detalhe de endereço" id="endereco">
                <p:panelGrid styleClass="semBorda">
                	<p:row>
                		<p:column><h:outputText value="Local: "/></p:column>
                		<p:column>
                			<p:selectOneButton value="#{ContactBean.newAdress.place}">
					            <f:selectItem itemLabel="Casa" itemValue="Casa" />
					            <f:selectItem itemLabel="Trabalho" itemValue="Trabalho" />
					        </p:selectOneButton>
                		</p:column>
                		<p:column>
		                	<p:dataTable value="#{ContactBean.listAdress}" var="ad" id="adressTable">
					            <p:column headerText="Local">
					                <h:outputText value="#{ad.place}" />
					            </p:column>
					            <p:column headerText="Numero">
					                <h:outputText value="#{ad.numbr}" />
					            </p:column>
					            <p:column headerText="Rua">
					                <h:outputText value="#{ad.street}" />
					            </p:column>
					            <p:column headerText="Bairro">
					                <h:outputText value="#{ad.neighb}" />
					            </p:column>
					            <p:column headerText="Cidade">
					                <h:outputText value="#{ad.city}" />
					            </p:column>
								<p:column headerText="Estado">
				                	 <h:outputText value="#{ad.stateOf}" />
			            		</p:column>		            		          
					            <p:column headerText="Ação">
					                <p:commandLink value="Remover" update=":form2:adressTable" process=":form2:adressTable">
					                	<p:collector value="#{ad}" removeFrom="#{ContactBean.listAdress}" unique="true"/>
					                </p:commandLink>
					            </p:column>
				        	</p:dataTable>
			        </p:column>
                    </p:row>
                    <p:row>
                		<p:column><h:outputText value="Numero: "/></p:column>
                		<p:column><p:inputText value="#{ContactBean.newAdress.numbr}" onblur="value=value.toUpperCase()"/></p:column>
                    </p:row>
                    <p:row>
                		<p:column><h:outputText value="Rua: "/></p:column>
                		<p:column><p:inputText value="#{ContactBean.newAdress.street}" required="true" label="Rua" onblur="value=value.toUpperCase()"/></p:column>
                    </p:row>
                    <p:row>
                		<p:column><h:outputText value="Bairro: "/></p:column>
                		<p:column><p:inputText value="#{ContactBean.newAdress.neighb}" required="true" label="Bairro" onblur="value=value.toUpperCase()"/></p:column>
                    </p:row>
                    <p:row>
                		<p:column><h:outputText value="Cidade: "/></p:column>
                		<p:column><p:inputText value="#{ContactBean.newAdress.city}" required="true" label="Cidade" onblur="value=value.toUpperCase()"/></p:column>
                    </p:row>
                    <p:row>
                		<p:column><h:outputText value="Estado: "/></p:column>
                		<p:column>
	                		
	                		<p:selectOneMenu id="console" value="#{ContactBean.newAdress.stateOf}" required="true" label="Estado">
					            <f:selectItem itemLabel="Select One" itemValue="" />
					            	<f:selectItem itemLabel="AC" itemValue="AC" />
									<f:selectItem itemLabel="AL" itemValue="AL" />
									<f:selectItem itemLabel="AP" itemValue="AP" />
									<f:selectItem itemLabel="AM" itemValue="AM" />
									<f:selectItem itemLabel="BA" itemValue="BA" />
									<f:selectItem itemLabel="CE" itemValue="CE" />
									<f:selectItem itemLabel="DF" itemValue="DF" />
									<f:selectItem itemLabel="ES" itemValue="ES" />
									<f:selectItem itemLabel="GO" itemValue="GO" />
									<f:selectItem itemLabel="MA" itemValue="MA" />
									<f:selectItem itemLabel="MT" itemValue="MT" />
									<f:selectItem itemLabel="MS" itemValue="MS" />
									<f:selectItem itemLabel="MG" itemValue="MG" />
									<f:selectItem itemLabel="PA" itemValue="PA" />
									<f:selectItem itemLabel="PB" itemValue="PB" />
									<f:selectItem itemLabel="PR" itemValue="PR" />
									<f:selectItem itemLabel="PE" itemValue="PE" />
									<f:selectItem itemLabel="PI" itemValue="PI" />
									<f:selectItem itemLabel="RJ" itemValue="RJ" />
									<f:selectItem itemLabel="RN" itemValue="RN" />
									<f:selectItem itemLabel="RS" itemValue="RS" />
									<f:selectItem itemLabel="RO" itemValue="RO" />
									<f:selectItem itemLabel="RR" itemValue="RR" />
									<f:selectItem itemLabel="SC" itemValue="SC" />
									<f:selectItem itemLabel="SP" itemValue="SP" />
									<f:selectItem itemLabel="SE" itemValue="SE" />
									<f:selectItem itemLabel="TO" itemValue="TO" />
					        </p:selectOneMenu>
	                		
                		</p:column>
                    </p:row>
                    <p:row>
                		<p:column><p:commandButton id="resetAdress" value="limpar" type="reset"/></p:column>
                		
            			<p:column><p:commandButton id="addAdress" value="Add" update=":form2:endereco" process=":form2:endereco" action="#{ContactBean.reinit}" >
                				  <p:collector value="#{ContactBean.newAdress}" addTo="#{ContactBean.listAdress}"  unique="true"/></p:commandButton></p:column>
                	</p:row>
                </p:panelGrid>
            </p:panel>
 
            <p:panel header="Detalhe de Telefone" id="telefone">
                            <p:panelGrid styleClass="semBorda">
                	<p:row>
                		<p:column><h:outputText value="Tipo: "/></p:column>
                		<p:column>
                		    <p:selectOneButton value="#{ContactBean.newPhone.typ}">
					            <f:selectItem itemLabel="Fixo" itemValue="Fixo" />
					            <f:selectItem itemLabel="Móvel" itemValue="Móvel" />
					        </p:selectOneButton>
                		</p:column>
                		<p:column>
		                	<p:dataTable value="#{ContactBean.listPhones}" var="ph" id="phoneTable">
					            <p:column headerText="Tipo">
					                <h:outputText value="#{ph.typ}" />
					            </p:column>
					            <p:column headerText="Operadora">
					                <h:outputText value="#{ph.oper}" />
					            </p:column>
					            <p:column headerText="Número">
					                <h:outputText value="#{ph.numbr}" />
					            </p:column>
					            <p:column headerText="Ação">
					                <p:commandLink value="Remover" update=":form2:phoneTable" process=":form2:phoneTable">
					                	<p:collector value="#{ph}" removeFrom="#{ContactBean.listPhones}" unique="true"/>
					                </p:commandLink>
					            </p:column>
				        	</p:dataTable>
			        </p:column>
                    </p:row>
                    <p:row>
                		<p:column><h:outputText value="Operadora: "/></p:column>
                		<p:column><p:inputText value="#{ContactBean.newPhone.oper}" onblur="value=value.toUpperCase()"/></p:column>
                    </p:row>
                    <p:row>
                		<p:column><h:outputText value="Número: "/></p:column>
                		<p:column><p:inputMask value="#{ContactBean.newPhone.numbr}" mask="(99)9-9999-9999" required="true" label="Número Telefone"/></p:column>
                    </p:row>
                    <p:row>
                		<p:column><p:commandButton id="resetPhone" value="limpar" type="reset"/></p:column>
            			<p:column><p:commandButton id="addPhone" value="Add" update=":form2:telefone" process=":form2:telefone" action="#{ContactBean.reinit}" >
                				  <p:collector value="#{ContactBean.newPhone}" addTo="#{ContactBean.listPhones}"  unique="true"/></p:commandButton></p:column>
                	</p:row>
                </p:panelGrid>
            </p:panel>
	</h:form> 
	<h:form id="form3">   
            <p:panel header="Confirmação">
				<h:panelGrid columns="1">
					<p:commandButton value="Salvar" actionListener="#{ContactBean.saveAll}" update=":form1 :form2 :form3"/>
				</h:panelGrid>
            </p:panel>
	</h:form>

	
</h:body>

</html>